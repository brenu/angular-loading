!function(n){"function"==typeof define&&define.amd?define(["angular","spinjs"],n):"object"==typeof exports?n(require("angular"),require("spinjs")):n(window.angular,window.Spinner)}(function(n,i){"use strict";function a(i){var e=!1,o=1;return"boolean"==typeof i&&(e=i,i=arguments[1]||{},o++),n.forEach([].slice.call(arguments,o),function(o){var t,d,s,l,r;for(l in o)r=i[l],s=o[l],i!==s&&(e&&s&&(n.isObject(s)||(t=n.isArray(s)))?(d=t?r&&n.isArray(r)?r:[]:r&&n.isObject(r)?r:{},i[l]=a(e,d,s)):void 0!==s&&(i[l]=s))}),i}n.module("darthwade.loading",[]).value("loadingOptions",{active:!1,text:"Loading...",className:"",overlay:!0,spinner:!0,spinnerOptions:{lines:12,length:7,width:4,radius:10,rotate:0,corners:1,color:"#fff",direction:1,speed:2,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"dw-spinner",top:"auto",left:"auto",position:"relative"}}).service("$loading",["$timeout","$rootScope","loadingOptions",function(n,i,e){var o=this;o.setDefaultOptions=function(n){a(!0,e,n)},o.start=function(a){n(function(){i.$broadcast("$loadingStart",a)})},o.finish=function(a){n(function(){i.$broadcast("$loadingFinish",a)})}}]).directive("dwLoading",["$rootScope","loadingOptions",function(e,o){return{link:function(t,d,s){var l,r,c,p,u,f=null,v=s.dwLoading||!1,g=function(){r&&r.addClass("dw-loading-active"),f&&f.spin(p[0])},w=function(){r&&r.removeClass("dw-loading-active"),f&&f.stop()};t.$watch(s.dwLoadingOptions,function(e){w(),l=a(!0,{},o,e),c=n.element("<div></div>").addClass("dw-loading-body"),r=n.element("<div></div>").addClass("dw-loading").append(c),l.overlay&&r.addClass("dw-loading-overlay"),l.className&&r.addClass(l.className),l.spinner&&(p=n.element("<div></div>").addClass("dw-loading-spinner"),c.append(p),f=new i(l.spinnerOptions)),l.text&&(u=n.element("<div></div>").addClass("dw-loading-text").text(l.text),c.append(u)),d.append(r),(l.active||!v)&&g()},!0),e.$on("$loadingStart",function(n,i){i===v&&g()}),e.$on("$loadingFinish",function(n,i){i===v&&w()}),t.$on("$destroy",function(){w(),f=null})}}}])});